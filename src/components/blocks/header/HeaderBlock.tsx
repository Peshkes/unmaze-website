import React, {useEffect, useRef, useState} from 'react';
import style from './header.module.css'
import HeaderList from "./HeaderList";
import BurgerIcon from "../burger/BurgerIcon";
import LanguageSwitcher from "../language-switcher/LanguageSwitcher";

const HeaderBlock = () => {
    const [menuOpen, setMenuOpen] = useState(false);
    const menuRef = useRef<HTMLDivElement>(null);

    useEffect(() => {
        const handleClickOutside = (event: MouseEvent) => {
            if (menuRef.current && !menuRef.current.contains(event.target as Node)) {
                setMenuOpen(false);
            }
        };

        if (menuOpen) {
            document.addEventListener('click', handleClickOutside);
        } else {
            document.removeEventListener('click', handleClickOutside);
        }

        return () => {
            document.removeEventListener('click', handleClickOutside);
        };
    }, [menuOpen]);

    const burgerClickHandler = () => {
        setMenuOpen((prevState) => !prevState);
    };

    return (
        <div className={style.block} ref={menuRef}>
            <div className={style.mobileBlock}>
                <svg className={style.logoBlock} viewBox="0 0 188 27" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clipPath="url(#clip0_79_352)">
                        <path
                            className={style.logo}
                            d="M75.063 26.304V1.33824H78.2112V7.48721H78.5928V26.304H75.063ZM90.47 26.304L90.4938 10.1456C90.4938 8.15759 89.9453 6.59338 88.8561 5.44526C87.767 4.29714 86.328 3.72694 84.5473 3.72694C82.7665 3.72694 81.3275 4.32026 80.2304 5.49149C79.1334 6.67043 78.5848 8.24235 78.5848 10.1918L76.486 9.08224C76.486 7.47951 76.8756 6.04629 77.6547 4.77488C78.4338 3.50348 79.499 2.50177 80.8505 1.76975C82.202 1.03772 83.7364 0.675567 85.4536 0.675567C87.1707 0.675567 88.554 1.01461 89.826 1.69269C91.106 2.37077 92.1156 3.35707 92.839 4.65159C93.5704 5.94612 93.9361 7.51803 93.9361 9.36735L93.9123 26.3117H90.4541L90.47 26.304ZM105.805 26.304L105.829 9.91444C105.829 7.98807 105.273 6.47779 104.176 5.3682C103.071 4.26632 101.663 3.71153 99.9701 3.71153C99.0002 3.71153 98.0542 3.92728 97.132 4.35879C96.2098 4.79029 95.4546 5.48379 94.8583 6.43927C94.2621 7.39474 93.9679 8.64303 93.9679 10.1841L91.893 9.60622C91.8453 7.81855 92.211 6.25433 92.9821 4.91358C93.7533 3.57283 94.8186 2.53259 96.178 1.78516C97.5375 1.03772 99.0797 0.660156 100.789 0.660156C103.381 0.660156 105.456 1.4307 107.014 2.98721C108.572 4.53601 109.351 6.6319 109.351 9.26718L109.327 26.304H105.821H105.805Z"
                        />
                        <path
                            d="M122.906 26.9974C120.966 26.9974 119.336 26.6583 118.024 25.9803C116.713 25.3022 115.727 24.4006 115.075 23.2756C114.423 22.1506 114.097 20.9255 114.097 19.6001C114.097 18.2748 114.375 17.0881 114.94 16.1249C115.504 15.1618 116.275 14.3758 117.253 13.7517C118.231 13.1352 119.36 12.6652 120.648 12.3416C121.952 12.0333 123.391 11.7636 124.981 11.5248C126.563 11.2859 128.113 11.0779 129.631 10.9006C131.15 10.7234 132.477 10.5539 133.63 10.3844L132.39 11.1241C132.438 8.65834 131.945 6.83214 130.911 5.64549C129.878 4.45885 128.081 3.86553 125.521 3.86553C123.756 3.86553 122.262 4.2508 121.053 5.02135C119.845 5.7919 118.978 7.00936 118.486 8.67375L115.075 7.70286C115.663 5.46827 116.848 3.73454 118.629 2.50166C120.409 1.26878 122.723 0.652344 125.569 0.652344C127.922 0.652344 129.925 1.07615 131.563 1.93916C133.209 2.79447 134.369 4.02734 135.061 5.64549C135.379 6.36981 135.586 7.17888 135.681 8.07272C135.777 8.96656 135.824 9.8758 135.824 10.8005V26.3116H132.7V20.047L133.606 20.4169C132.732 22.559 131.372 24.1926 129.528 25.3176C127.684 26.4426 125.474 27.0051 122.898 27.0051L122.906 26.9974ZM123.311 24.0616C124.949 24.0616 126.38 23.7765 127.604 23.2063C128.828 22.6361 129.814 21.8578 130.561 20.8638C131.309 19.8698 131.794 18.7448 132.016 17.4965C132.207 16.6952 132.31 15.8167 132.326 14.8458C132.342 13.8827 132.35 13.166 132.35 12.6883L133.686 13.3587C132.493 13.5128 131.205 13.6669 129.806 13.821C128.415 13.9751 127.048 14.1523 125.704 14.3527C124.361 14.553 123.144 14.7919 122.063 15.0693C121.332 15.2696 120.624 15.5547 119.94 15.9169C119.257 16.2791 118.7 16.7568 118.255 17.3655C117.818 17.9666 117.603 18.714 117.603 19.6078C117.603 20.3321 117.786 21.0333 118.168 21.7114C118.541 22.3895 119.145 22.952 119.98 23.3989C120.815 23.8458 121.928 24.0693 123.311 24.0693V24.0616Z"
                            className={style.logo}/>
                        <path
                            d="M139.648 26.3056V25.589L156.272 4.5068H140.889V1.33984H162.043V2.1258L145.444 23.1386H161.137V26.3056H139.648Z"
                            className={style.logo}/>
                        <path
                            d="M176.282 26.9973C173.769 26.9973 171.591 26.4579 169.755 25.3791C167.918 24.3004 166.487 22.7824 165.47 20.8252C164.452 18.868 163.943 16.5718 163.943 13.9365C163.943 11.3012 164.444 8.85087 165.446 6.86285C166.448 4.87484 167.855 3.34145 169.683 2.26268C171.504 1.18391 173.65 0.644531 176.131 0.644531C178.611 0.644531 180.845 1.20703 182.642 2.33974C184.438 3.47244 185.798 5.0983 186.72 7.2096C187.642 9.3209 188.063 11.8406 187.984 14.7687H184.406V13.5666C184.343 10.3303 183.619 7.88768 182.244 6.23871C180.869 4.58974 178.865 3.76525 176.226 3.76525C173.587 3.76525 171.337 4.63597 169.866 6.37741C168.395 8.11885 167.664 10.6 167.664 13.8209C167.664 17.0418 168.395 19.4074 169.866 21.1411C171.337 22.8748 173.42 23.7456 176.131 23.7456C177.975 23.7456 179.581 23.3372 180.964 22.5127C182.34 21.6882 183.421 20.5016 184.216 18.945L187.483 20.1702C186.466 22.3432 184.971 24.0307 182.991 25.225C181.012 26.4194 178.77 27.0127 176.282 27.0127V26.9973ZM166.432 14.7687V11.9254H186.108V14.7687H166.432Z"
                            className={style.logo}/>
                        <path
                            d="M26.2346 0.500535C26.0677 0.400364 25.8689 0.384953 25.6781 0.346426C25.5827 0.346426 25.4953 0.346426 25.3999 0.33872C25.2886 0.33872 25.1693 0.307898 25.058 0.292487C24.9944 0.284782 24.9308 0.292487 24.8672 0.292487C24.8116 0.292487 24.748 0.292487 24.6923 0.300193C24.6844 0.300193 24.6764 0.300193 24.6685 0.300193C24.6605 0.300193 24.5969 0.315604 24.5492 0.331015C24.5492 0.331015 24.5492 0.331015 24.5174 0.346426C24.4856 0.361836 24.4618 0.377247 24.43 0.384953C24.3743 0.415775 24.3187 0.446597 24.263 0.477419C24.2471 0.485124 24.2392 0.500535 24.2233 0.508241C24.2153 0.515946 24.2074 0.523652 24.1994 0.531357C24.1835 0.554473 24.1756 0.57759 24.1597 0.593001C24.1597 0.600706 24.1517 0.608412 24.1438 0.616117C24.1438 0.616117 24.1358 0.631528 24.1279 0.639234C24.1199 0.654645 24.1279 0.654645 24.1199 0.654645C23.8258 1.7103 23.3011 2.82759 24.1279 3.87554C25.3522 5.43204 25.0898 7.18889 24.899 8.91492C24.7639 10.0939 24.3346 11.242 24.1756 12.4209C23.7701 15.0331 22.5379 17.4603 20.6379 19.3635C18.6265 21.5211 14.3813 22.4689 12.036 21.2129C9.81801 20.1418 8.02927 18.385 6.94808 16.2274C5.82714 13.5074 4.92085 10.7026 4.25305 7.84386C4.07021 6.68033 4.09406 5.49369 4.3087 4.33016C4.6744 2.86612 3.82376 1.37125 2.34507 0.90122C1.07308 0.331014 0.206539 0.716289 0.0554904 2.04163C-0.00810908 2.9894 -0.016059 3.94488 0.0316406 4.90036C-0.111458 8.90721 1.35928 12.5673 2.61537 16.2737C2.66307 16.3738 2.70282 16.4817 2.74257 16.5896C3.11621 17.6144 3.90326 18.6855 4.6426 19.6718C6.34389 21.367 8.10082 23.0082 9.95316 24.5493C12.0042 26.2291 14.7947 26.7916 17.3704 26.0519C21.4647 24.9423 24.907 23.1778 26.5367 18.9552C27.5464 16.343 28.6196 13.8079 28.4765 10.9569C28.4686 10.7334 28.4924 10.5022 28.5322 10.2788C28.548 9.49283 28.5799 8.70687 28.6037 7.91321C28.6196 7.52023 28.5958 7.11954 28.6355 6.72656C28.6355 6.70345 28.6355 6.68033 28.6355 6.65721C28.6355 6.62639 28.6275 6.58786 28.6275 6.55704C28.6275 6.13324 28.5719 5.70944 28.5163 5.28564C28.4845 5.03906 28.4606 4.79249 28.4368 4.54591C28.405 4.40721 28.3732 4.26081 28.3414 4.12211C28.3334 4.08358 28.3255 4.05276 28.3175 4.01423C28.2221 3.59043 28.1267 3.16663 28.0393 2.73512C27.8167 1.61783 27.0535 1.02451 26.2505 0.485124"
                            className={style.logo}/>
                        <path
                            d="M68.0116 21.8982C68.0672 18.1456 67.6618 14.4008 66.7952 10.7407C66.4613 8.99921 65.6743 7.37336 64.5215 6.00949C59.8708 0.638769 53.2406 -0.956265 47.0873 3.48209C46.7932 3.69014 46.507 3.90589 46.2367 4.14476C44.7183 5.53175 43.2157 6.93414 41.5701 8.44442C41.4588 7.94356 41.3952 7.48894 41.26 7.04973C40.7194 5.22353 40.2186 3.37421 39.5667 1.58654C39.2964 1.02404 38.8512 0.561714 38.3027 0.245789C37.4361 -0.224245 36.3549 -0.0470187 35.6871 0.669591C34.8921 1.26291 35.4566 1.94099 35.6712 2.58826C36.0131 3.59767 36.3867 4.59939 36.6411 5.62421C37.778 11.0412 38.3901 16.5429 38.4696 22.0754C38.4696 23.2775 39.0341 24.4102 39.996 25.1653C40.3935 25.6508 41.0215 25.905 41.6575 25.8434C42.2935 25.7817 42.85 25.4042 43.1362 24.8494C43.486 24.179 43.7007 23.4393 43.7643 22.6919C44.0425 20.9581 44.1697 19.1936 44.5354 17.4829C44.5275 12.721 50.1719 6.36394 55.3712 7.79716C58.8612 8.76034 59.7436 12.5437 59.6641 16.1499C59.6641 16.8203 59.6641 17.4675 59.6244 18.1148C59.688 19.0703 59.7436 20.0258 59.8152 20.9735C59.8947 22.0292 60.0219 23.0771 60.1252 24.1328C60.2445 25.2192 61.0474 26.1285 62.1366 26.4136C63.6073 26.9761 66.8509 26.298 67.7333 25.0651C67.7572 25.0266 67.7651 24.9881 67.789 24.9496C67.8128 24.8571 67.8287 24.7646 67.8526 24.6799C67.8685 24.5643 67.8844 24.5103 67.8844 24.4949C67.9003 24.3871 67.9082 24.2715 67.9241 24.1636C67.9957 23.4085 68.0195 22.6456 68.0354 21.8828L68.0116 21.8982Z"
                            className={style.logo}/>
                    </g>
                </svg>
                <BurgerIcon isOpen={menuOpen} onClick={burgerClickHandler}/>
            </div>
            <div className={`${style.indoor} ${menuOpen && style.open}`}>
                <HeaderList/>
            </div>
            <div className={style.desktopSwitcher}>
                <LanguageSwitcher/>
            </div>
        </div>
    );
};

export default HeaderBlock;
